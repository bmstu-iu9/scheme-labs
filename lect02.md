Лекция 2. Языки семейства LISP. Язык программирования Scheme
============================================================

LISP (от **LIS**t **P**rocessing) — язык программирования, созданный Джоном
МакКарти в 1950-1960-е годы. Породил целое семейство языков со сходным
синтаксисом и идеологией: Common Lisp, Scheme, Closure и т.д.

Scheme — язык семейства LISP, созданный Гаем Стилом и Джеральдом Сассманом
в 1970-е годы. Отличается простотой и минималистичным дизайном.

Диалект Scheme используется в книге Абельсона и Сассмана «Структура
и интерпретация компьютерных программ» (известна под аббревиатурой
[SICP](sicp.pdf)). Первые две главы этой книги содержат основы программирования
на Scheme (но без макросов), ими можно пользоваться в качестве учебника.

В нашем курсе мы будем использовать диалект Scheme R<sup>5</sup>RS.
Официальную спецификацию этого диалекта можно прочитать в PDF-ке
[r5rs.pdf](r5rs.pdf).

Основные постулаты языков семейства Lisp:

1. Единство кода и данных.
2. Всё есть список.
3. Выражения являются спискам, операция указывается в первом элементы.
4. Все выражения вычисляют значения.

Грамматику списков можно (упрощённо!) следующим образом описать при помощи БНФ
(формы Бэкуса-Наура):

    <терм>   ::= <атом> | <список>
    <список> ::= (<термы>)
    <термы>  ::= <пусто> | <терм> <термы>
    <атом>   ::= <переменная> | <число> | <символ> | <строка>

Иначе говоря:

* Терм — это либо атом, либо список.
* Список — последовательность термов (возможно пустая) в круглых скобках.
* Атом — имя переменной, число, символ или строка. Подробнее разновидности
  атомов мы изучим позже.

В выражениях языка Scheme после открывающей круглой скобки указывается
операция. Операцией может быть либо вызов функции, либо так называемая
**особая форма.** В случае вызова функции первым термом после скобок
является имя функции или выражение, порождающее функцию. В случае особой
формы после открывающей круглой скобки располагается **ключевое слово.**


### Значения языка Scheme

* Числа: `1`, `1.0`, `6.022e23`, `1/3`…
* Строки: `"Scheme"`
* Логический тип: `#t`, `#f`
* Литерный (character) тип: `#\a` `#\newline`…
* Символьный (symbol) тип: `'x`, `'sin`
* Списки
* Вектора
* Процедурный тип
* Продолжения (continuations)


### Глобальные переменные

Переменные в Scheme определяются при помощи конструкции `define`.
Её синтаксис:

    (define ‹имя-переменной› ‹выражение›)


```scheme
(define (area r)
(* r r 3.1415926))
```

### Управляющие конструкции

1. Объявление глобальных переменных

   ```scheme
   (define <var> <val>)
   (define (f <args>) <expr>)
   ```

   То же самое:

   ```scheme
   (define f
     (lambda (<args>)
       <expr>))
   ```

2. Ветвление. В языке Scheme «ложью» считается только константа `#f`, все
   остальные значения считаюются «истиной». Хотя для представления
   истины предусмотрена и специальная логическая константа `#t`.

   * `if`:
     ```scheme
     (if <условие>
         <если истина>
         <если ложь>)
     ```

   * `cond`:
     ```scheme
     (cond
       (<условие 1> <выражение>)
       (<условие 2> <выражение>)
       …
       (else <выражение>)
     ```

   * `case` — изучить самостоятельно
   * `and/or`:

     ```scheme
     (and/or <условие 1>
             <условие 2>
             ...
             <условие n>)
     ```

     Как писать не надо:

     ```scheme
     (and <усл>
          <выраж>)             ; корректная запись
     (if <усл>
         <выраж>
         #f)                   ; некорректная запись
     ```

     ```scheme
     (or <усл> <выраж>)        ; корректно
     (if <усл>
         #t
         <выраж)               ; некорректно
     ```

     ```scheme
     (and (not <усл>) <выраж>) ; корректно
     (if <усл>
         #f
         <выраж>)              ; некорректно
     ```

     ```scheme
     (or (not <усл>) <выраж>)  ; корректно
     (if <усл>
         <выраж>
         #t)                   ; некорректно
     ```
